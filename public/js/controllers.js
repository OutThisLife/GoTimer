(function(){var e;e=angular.module("app.controllers",[]),e.controller("MainController",["$scope","$xhr",function(e,n){var t,l;return n.fetch("/clients").then(function(n){return e.clients=n.data}),l={},n.fetch("/").then(function(n){var i,a,r,c;c=n.data;for(r in c)a=c[r],i=t(a.ClientName,a.Path),null==l[a.ClientName]&&(l[a.ClientName]={}),null==l[a.ClientName][i]&&(l[a.ClientName][i]={id:a.ID,Time:0,Path:i,Date:a.Date}),null==l[a.ClientName][i].children&&(l[a.ClientName][i].children={}),null==l[a.ClientName][i].children[a.Path]&&(l[a.ClientName][i].children[a.Path]=a),l[a.ClientName][i].Time+=a.Time,l[a.ClientName][i].children[a.Path].Time+=a.Time;return e.data=l}),t=function(e,n){return n=function(){return-1===n.indexOf("/")?n.substring(0,n.lastIndexOf("\\")):n.substring(0,n.LastIndexOf("/"))}(),n.replace("/(.*"+e+".*?\\\\{1}.*?)\\\\{1}(.*)$/i","$1")},e.search={},e.filterClient=function(n){return e.search.client=n},e.deleteFilter=function(){return delete e.search.client},e.hasData=function(){return null==e.search.client?!0:l[e.search.client]!==void 0}}])}).call(this);