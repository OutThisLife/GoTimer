(function(){var e;e=angular.module("app.controllers",[]),e.controller("MainController",["$scope","$xhr",function(e,n){var t,i;return n.fetch("/clients").then(function(n){return e.clients=n.data}),i={},n.fetch("/").then(function(n){var l,a,r,c;c=n.data;for(r in c)a=c[r],l=t(a.ClientName,a.Path),null==i[a.ClientName]&&(i[a.ClientName]={}),null==i[a.ClientName][l]&&(i[a.ClientName][l]={id:a.ID,Time:0,Path:l,Date:a.Date}),null==i[a.ClientName][l].children&&(i[a.ClientName][l].children={}),null==i[a.ClientName][l].children[a.Path]&&(i[a.ClientName][l].children[a.Path]=a,i[a.ClientName][l].children[a.Path].Time=0),i[a.ClientName][l].Time+=a.Time,i[a.ClientName][l].children[a.Path].Time+=a.Time;return e.data=i}),t=function(e,n){return n=function(){return-1===n.indexOf("/")?n.substring(0,n.lastIndexOf("\\")):n.substring(0,n.LastIndexOf("/"))}(),n.replace("/(.*"+e+".*?\\\\{1}.*?)\\\\{1}(.*)$/i","$1")},e.search={},e.filterClient=function(n){return e.search.client=n},e.deleteFilter=function(){return delete e.search.client},e.hasData=function(){return null==e.search.client?!0:i[e.search.client]!==void 0}}])}).call(this);